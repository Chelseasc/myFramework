{"remainingRequest":"/Users/mac/Desktop/code/myFragment/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/Users/mac/Desktop/code/myFragment/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mac/Desktop/code/myFragment/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/code/myFragment/src/components/Form/FormItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Desktop/code/myFragment/src/components/Form/FormItem.vue","mtime":1587800395000},{"path":"/Users/mac/Desktop/code/myFragment/node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js","mtime":1582020395000},{"path":"/Users/mac/Desktop/code/myFragment/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1582020395000},{"path":"/Users/mac/Desktop/code/myFragment/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1582020395000},{"path":"/Users/mac/Desktop/code/myFragment/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1582020534000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvbWFjL0Rlc2t0b3AvY29kZS9teUZyYWdtZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBTY2hlbWEgZnJvbSAnYXN5bmMtdmFsaWRhdG9yJzsKZXhwb3J0IGRlZmF1bHQgewogIGluamVjdDogWydmb3JtJ10sCiAgcHJvcHM6IHsKICAgIGxhYmVsOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0sCiAgICBwcm9wOiB7CiAgICAgIC8vIOmcgOimgeagoemqjOeahOWtl+autemhuQogICAgICB0eXBlOiBTdHJpbmcKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlcnJvck1lc3NhZ2U6ICcnCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuJG9uKCd2YWxpZGF0ZScsIHRoaXMudmFsaWRhdGUpOyAvLyDnm5HlkKzliLDku6XlkI7lgZrmoKHpqowKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICBjb25zb2xlLmxvZyh0aGlzLnByb3ApOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g5YGa5qCh6aqMCiAgICB2YWxpZGF0ZTogZnVuY3Rpb24gdmFsaWRhdGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgdmFsdWUgPSB0aGlzLmZvcm0ubW9kZWxbdGhpcy5wcm9wXTsKICAgICAgdmFyIHJ1bGVzID0gdGhpcy5mb3JtLnJ1bGVzW3RoaXMucHJvcF07IC8vIG5wbSBpIGFzeW5jLXZhbGlkYXRvciAtUwoKICAgICAgdmFyIGRlc2NyaWJlID0gX2RlZmluZVByb3BlcnR5KHt9LCB0aGlzLnByb3AsIHJ1bGVzKTsKCiAgICAgIHZhciBzY2hlbWEgPSBuZXcgU2NoZW1hKGRlc2NyaWJlKTsgLy8g6L+Z6YeMcmV0dXJu55qE5piv5qCh6aqM57uT5p6c55qEcHJvbWlzZeWvueixoQoKICAgICAgcmV0dXJuIHNjaGVtYS52YWxpZGF0ZShfZGVmaW5lUHJvcGVydHkoe30sIHRoaXMucHJvcCwgdmFsdWUpLCBmdW5jdGlvbiAoZXJyb3JzKSB7CiAgICAgICAgaWYgKGVycm9ycykgewogICAgICAgICAgX3RoaXMuZXJyb3JNZXNzYWdlID0gZXJyb3JzWzBdLm1lc3NhZ2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLmVycm9yTWVzc2FnZSA9ICcnOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["FormItem.vue"],"names":[],"mappings":";;;;;;;;;;AAUA,OAAA,MAAA,MAAA,iBAAA;AACA,eAAA;AACA,EAAA,MAAA,EAAA,CAAA,MAAA,CADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KADA;AAKA,IAAA,IAAA,EAAA;AAAA;AACA,MAAA,IAAA,EAAA;AADA;AALA,GAFA;AAWA,EAAA,IAXA,kBAWA;AACA,WAAA;AACA,MAAA,YAAA,EAAA;AADA,KAAA;AAGA,GAfA;AAgBA,EAAA,OAhBA,qBAgBA;AACA,SAAA,GAAA,CAAA,UAAA,EAAA,KAAA,QAAA,EADA,CACA;AACA,GAlBA;AAmBA,EAAA,OAnBA,qBAmBA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,KAAA,IAAA;AAEA,GAtBA;AAuBA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,QAFA,sBAEA;AAAA;;AACA,UAAA,KAAA,GAAA,KAAA,IAAA,CAAA,KAAA,CAAA,KAAA,IAAA,CAAA;AACA,UAAA,KAAA,GAAA,KAAA,IAAA,CAAA,KAAA,CAAA,KAAA,IAAA,CAAA,CAFA,CAGA;;AACA,UAAA,QAAA,uBAAA,KAAA,IAAA,EAAA,KAAA,CAAA;;AACA,UAAA,MAAA,GAAA,IAAA,MAAA,CAAA,QAAA,CAAA,CALA,CAMA;;AACA,aAAA,MAAA,CAAA,QAAA,qBAAA,KAAA,IAAA,EAAA,KAAA,GAAA,UAAA,MAAA,EAAA;AACA,YAAA,MAAA,EAAA;AACA,UAAA,KAAA,CAAA,YAAA,GAAA,MAAA,CAAA,CAAA,CAAA,CAAA,OAAA;AACA,SAFA,MAEA;AACA,UAAA,KAAA,CAAA,YAAA,GAAA,EAAA;AACA;AACA,OANA,CAAA;AAOA;AAhBA;AAvBA,CAAA","sourcesContent":["<template>\n  <div>\n    <label v-if=\"label\">{{label}}</label>\n    <slot></slot>\n    <p v-if=\"errorMessage\">{{errorMessage}}</p>\n    <!-- {{form.rules}} -->\n  </div>\n</template>\n\n<script>\nimport Schema from 'async-validator'\nexport default {\n  inject: ['form'],\n  props: {\n    label: {\n      type: String,\n      default: ''\n    },\n    prop: { // 需要校验的字段项\n      type: String\n    }\n  },\n  data() {\n    return {\n      errorMessage: ''\n    }\n  },\n  mounted() {\n    this.$on('validate', this.validate); // 监听到以后做校验\n  },\n  created() {\n    console.log(this.prop);\n    \n  },\n  methods: {\n    // 做校验\n    validate() {\n      const value = this.form.model[this.prop];\n      const rules = this.form.rules[this.prop];\n      // npm i async-validator -S\n      const describe = {[this.prop]: rules};\n      const schema = new Schema(describe);\n      // 这里return的是校验结果的promise对象\n      return schema.validate({[this.prop]: value}, errors => {\n        if(errors) {\n          this.errorMessage = errors[0].message;\n        } else {\n          this.errorMessage = '';\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n</style>\n"],"sourceRoot":"src/components/Form"}]}