{"remainingRequest":"/Users/mac/Desktop/code/myFramework/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/Users/mac/Desktop/code/myFramework/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mac/Desktop/code/myFramework/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/code/myFramework/src/components/Form/FormItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Desktop/code/myFramework/src/components/Form/FormItem.vue","mtime":1587800395000},{"path":"/Users/mac/Desktop/code/myFramework/node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js","mtime":1582020395000},{"path":"/Users/mac/Desktop/code/myFramework/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1582020395000},{"path":"/Users/mac/Desktop/code/myFramework/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1582020395000},{"path":"/Users/mac/Desktop/code/myFramework/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1582020534000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICIvVXNlcnMvbWFjL0Rlc2t0b3AvY29kZS9teUZyYW1ld29yay9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgU2NoZW1hIGZyb20gJ2FzeW5jLXZhbGlkYXRvcic7CmV4cG9ydCBkZWZhdWx0IHsKICBpbmplY3Q6IFsnZm9ybSddLAogIHByb3BzOiB7CiAgICBsYWJlbDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAogICAgcHJvcDogewogICAgICAvLyDpnIDopoHmoKHpqoznmoTlrZfmrrXpobkKICAgICAgdHlwZTogU3RyaW5nCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZXJyb3JNZXNzYWdlOiAnJwogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLiRvbigndmFsaWRhdGUnLCB0aGlzLnZhbGlkYXRlKTsgLy8g55uR5ZCs5Yiw5Lul5ZCO5YGa5qCh6aqMCiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgY29uc29sZS5sb2codGhpcy5wcm9wKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOWBmuagoemqjAogICAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHZhbHVlID0gdGhpcy5mb3JtLm1vZGVsW3RoaXMucHJvcF07CiAgICAgIHZhciBydWxlcyA9IHRoaXMuZm9ybS5ydWxlc1t0aGlzLnByb3BdOyAvLyBucG0gaSBhc3luYy12YWxpZGF0b3IgLVMKCiAgICAgIHZhciBkZXNjcmliZSA9IF9kZWZpbmVQcm9wZXJ0eSh7fSwgdGhpcy5wcm9wLCBydWxlcyk7CgogICAgICB2YXIgc2NoZW1hID0gbmV3IFNjaGVtYShkZXNjcmliZSk7IC8vIOi/memHjHJldHVybueahOaYr+agoemqjOe7k+aenOeahHByb21pc2Xlr7nosaEKCiAgICAgIHJldHVybiBzY2hlbWEudmFsaWRhdGUoX2RlZmluZVByb3BlcnR5KHt9LCB0aGlzLnByb3AsIHZhbHVlKSwgZnVuY3Rpb24gKGVycm9ycykgewogICAgICAgIGlmIChlcnJvcnMpIHsKICAgICAgICAgIF90aGlzLmVycm9yTWVzc2FnZSA9IGVycm9yc1swXS5tZXNzYWdlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy5lcnJvck1lc3NhZ2UgPSAnJzsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["FormItem.vue"],"names":[],"mappings":";;;;;;;;;;AAUA,OAAA,MAAA,MAAA,iBAAA;AACA,eAAA;AACA,EAAA,MAAA,EAAA,CAAA,MAAA,CADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KADA;AAKA,IAAA,IAAA,EAAA;AAAA;AACA,MAAA,IAAA,EAAA;AADA;AALA,GAFA;AAWA,EAAA,IAXA,kBAWA;AACA,WAAA;AACA,MAAA,YAAA,EAAA;AADA,KAAA;AAGA,GAfA;AAgBA,EAAA,OAhBA,qBAgBA;AACA,SAAA,GAAA,CAAA,UAAA,EAAA,KAAA,QAAA,EADA,CACA;AACA,GAlBA;AAmBA,EAAA,OAnBA,qBAmBA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,KAAA,IAAA;AAEA,GAtBA;AAuBA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,QAFA,sBAEA;AAAA;;AACA,UAAA,KAAA,GAAA,KAAA,IAAA,CAAA,KAAA,CAAA,KAAA,IAAA,CAAA;AACA,UAAA,KAAA,GAAA,KAAA,IAAA,CAAA,KAAA,CAAA,KAAA,IAAA,CAAA,CAFA,CAGA;;AACA,UAAA,QAAA,uBAAA,KAAA,IAAA,EAAA,KAAA,CAAA;;AACA,UAAA,MAAA,GAAA,IAAA,MAAA,CAAA,QAAA,CAAA,CALA,CAMA;;AACA,aAAA,MAAA,CAAA,QAAA,qBAAA,KAAA,IAAA,EAAA,KAAA,GAAA,UAAA,MAAA,EAAA;AACA,YAAA,MAAA,EAAA;AACA,UAAA,KAAA,CAAA,YAAA,GAAA,MAAA,CAAA,CAAA,CAAA,CAAA,OAAA;AACA,SAFA,MAEA;AACA,UAAA,KAAA,CAAA,YAAA,GAAA,EAAA;AACA;AACA,OANA,CAAA;AAOA;AAhBA;AAvBA,CAAA","sourcesContent":["<template>\n  <div>\n    <label v-if=\"label\">{{label}}</label>\n    <slot></slot>\n    <p v-if=\"errorMessage\">{{errorMessage}}</p>\n    <!-- {{form.rules}} -->\n  </div>\n</template>\n\n<script>\nimport Schema from 'async-validator'\nexport default {\n  inject: ['form'],\n  props: {\n    label: {\n      type: String,\n      default: ''\n    },\n    prop: { // 需要校验的字段项\n      type: String\n    }\n  },\n  data() {\n    return {\n      errorMessage: ''\n    }\n  },\n  mounted() {\n    this.$on('validate', this.validate); // 监听到以后做校验\n  },\n  created() {\n    console.log(this.prop);\n    \n  },\n  methods: {\n    // 做校验\n    validate() {\n      const value = this.form.model[this.prop];\n      const rules = this.form.rules[this.prop];\n      // npm i async-validator -S\n      const describe = {[this.prop]: rules};\n      const schema = new Schema(describe);\n      // 这里return的是校验结果的promise对象\n      return schema.validate({[this.prop]: value}, errors => {\n        if(errors) {\n          this.errorMessage = errors[0].message;\n        } else {\n          this.errorMessage = '';\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n</style>\n"],"sourceRoot":"src/components/Form"}]}