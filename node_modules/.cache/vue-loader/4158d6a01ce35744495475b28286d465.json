{"remainingRequest":"/Users/mac/Desktop/code/myFramework/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/code/myFramework/src/components/Form/FormItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Desktop/code/myFramework/src/components/Form/FormItem.vue","mtime":1587800395000},{"path":"/Users/mac/Desktop/code/myFramework/node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js","mtime":1582020395000},{"path":"/Users/mac/Desktop/code/myFramework/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1582020395000},{"path":"/Users/mac/Desktop/code/myFramework/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1582020395000},{"path":"/Users/mac/Desktop/code/myFramework/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1582020534000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTY2hlbWEgZnJvbSAnYXN5bmMtdmFsaWRhdG9yJwpleHBvcnQgZGVmYXVsdCB7CiAgaW5qZWN0OiBbJ2Zvcm0nXSwKICBwcm9wczogewogICAgbGFiZWw6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKICAgIHByb3A6IHsgLy8g6ZyA6KaB5qCh6aqM55qE5a2X5q616aG5CiAgICAgIHR5cGU6IFN0cmluZwogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVycm9yTWVzc2FnZTogJycKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLiRvbigndmFsaWRhdGUnLCB0aGlzLnZhbGlkYXRlKTsgLy8g55uR5ZCs5Yiw5Lul5ZCO5YGa5qCh6aqMCiAgfSwKICBjcmVhdGVkKCkgewogICAgY29uc29sZS5sb2codGhpcy5wcm9wKTsKICAgIAogIH0sCiAgbWV0aG9kczogewogICAgLy8g5YGa5qCh6aqMCiAgICB2YWxpZGF0ZSgpIHsKICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLmZvcm0ubW9kZWxbdGhpcy5wcm9wXTsKICAgICAgY29uc3QgcnVsZXMgPSB0aGlzLmZvcm0ucnVsZXNbdGhpcy5wcm9wXTsKICAgICAgLy8gbnBtIGkgYXN5bmMtdmFsaWRhdG9yIC1TCiAgICAgIGNvbnN0IGRlc2NyaWJlID0ge1t0aGlzLnByb3BdOiBydWxlc307CiAgICAgIGNvbnN0IHNjaGVtYSA9IG5ldyBTY2hlbWEoZGVzY3JpYmUpOwogICAgICAvLyDov5nph4xyZXR1cm7nmoTmmK/moKHpqoznu5PmnpznmoRwcm9taXNl5a+56LGhCiAgICAgIHJldHVybiBzY2hlbWEudmFsaWRhdGUoe1t0aGlzLnByb3BdOiB2YWx1ZX0sIGVycm9ycyA9PiB7CiAgICAgICAgaWYoZXJyb3JzKSB7CiAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9IGVycm9yc1swXS5tZXNzYWdlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9ICcnOwogICAgICAgIH0KICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["FormItem.vue"],"names":[],"mappings":";;;;;;;;;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FormItem.vue","sourceRoot":"src/components/Form","sourcesContent":["<template>\n  <div>\n    <label v-if=\"label\">{{label}}</label>\n    <slot></slot>\n    <p v-if=\"errorMessage\">{{errorMessage}}</p>\n    <!-- {{form.rules}} -->\n  </div>\n</template>\n\n<script>\nimport Schema from 'async-validator'\nexport default {\n  inject: ['form'],\n  props: {\n    label: {\n      type: String,\n      default: ''\n    },\n    prop: { // 需要校验的字段项\n      type: String\n    }\n  },\n  data() {\n    return {\n      errorMessage: ''\n    }\n  },\n  mounted() {\n    this.$on('validate', this.validate); // 监听到以后做校验\n  },\n  created() {\n    console.log(this.prop);\n    \n  },\n  methods: {\n    // 做校验\n    validate() {\n      const value = this.form.model[this.prop];\n      const rules = this.form.rules[this.prop];\n      // npm i async-validator -S\n      const describe = {[this.prop]: rules};\n      const schema = new Schema(describe);\n      // 这里return的是校验结果的promise对象\n      return schema.validate({[this.prop]: value}, errors => {\n        if(errors) {\n          this.errorMessage = errors[0].message;\n        } else {\n          this.errorMessage = '';\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n</style>\n"]}]}